<html>

<head>
    <title id="page-title">Editor de Texto Online</title>
    <style>
        #filename {
            background-color: #F0F0F0;
            width: 100%;
            font-size: 12px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            margin: 0;
            text-align: justify;
        }

        button {
            background-color: #ffffff;
            border: 1px;
            color: rgb(0, 0, 0);
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            margin: 10px 10px;
            cursor: pointer;
        }

        .dark-theme button {
            background-color: #333333;
            color: white;
        }

        button:hover {
            background-color: #F0F0F0;
        }

        button:active {
            background-color: #D3D3D3;
        }

        textarea {
            width: 98%;
            height: 83vh;
            font-size: 16px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            margin: 12px;
        }

        h3 {
            font-size: 11px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            margin: 10px;
        }

        .dark-theme {
            background-color: black;
            color: white;
        }

        .dark-theme textarea {
            background-color: #333333;
            color: white;
        }
    </style>
</head>

<body>
    <div id="filename"></div>
    <button id="open-button">Abrir</button>
    <button id="save-button">Salvar</button>
    <button id="print-button">Imprimir</button>
    <button id="dark-theme-btn">Tema Escuro</button>
    <textarea id="editor"></textarea>
    <h3>Versão 1.0.2<br>© 2023 - Esse projeto é livre para ser modificado, alterado, melhorado ou reformulado.</h3>

    <script>
        const filenameDiv = document.getElementById('filename');
        const openButton = document.getElementById('open-button');
        const saveButton = document.getElementById('save-button');
        const printButton = document.getElementById('print-button');
        const darkThemeBtn = document.getElementById('dark-theme-btn');
        const editor = document.getElementById('editor');

        // Função para abrir arquivo
        function openFile(event) {
            const input = event.target;
            const reader = new FileReader();
            reader.onload = function () {
                editor.value = reader.result;
                filenameDiv.innerHTML = `${input.files[0].name} (${input.files[0].size} bytes, ${reader.result.length} caracteres)`;
            };
            reader.readAsText(input.files[0]);
        }

        // Função para salvar arquivo
        function saveFile() {
            const text = editor.value;
            const blob = new Blob([text], { type: 'text/plain' });
            const anchor = document.createElement('a');
            let filename = prompt('Digite o nome do arquivo:', filenameDiv.innerHTML || 'Nome do arquivo');
            if (!filename.endsWith('.txt')) {
                filename += '.txt';
            }
            anchor.download = filename;
            anchor.href = window.URL.createObjectURL(blob);
            anchor.target = '_blank';
            anchor.click();
        }

        // Função para imprimir textarea
        function printTextarea() {
            // Obtenha o conteúdo da textarea
            var textareaContent = document.getElementById('editor').value;

            // Abra uma nova janela para imprimir o conteúdo da textarea
            var printWindow = window.open('', '', 'height=480,width=720');
            printWindow.document.write('<html><head><title>Editor de Texto Online</title></head>');
            printWindow.document.write('<body>');
            printWindow.document.write(textareaContent);
            printWindow.document.write('</body></html>');

            // Imprima a janela
            printWindow.print();
        }

        // Adicione event listeners aos botões
        document.getElementById('open-button').addEventListener('click', function () {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.txt';
            input.addEventListener('change', openFile);
            input.click();
        });
        document.getElementById('save-button').addEventListener('click', saveFile);
        document.getElementById('print-button').addEventListener('click', printTextarea);

        // Adicione event listener para salvar com Ctrl+S ou Cmd+S
        document.getElementById('editor').addEventListener('keydown', function (e) {
            if (e.keyCode === 83 && (navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey)) {
                e.preventDefault();
                saveFile();
            }
        });

        // Selecione o botão de tema escuro
        const darkThemeButton = document.querySelector('#dark-theme-btn');

        // Adicione um evento de clique ao botão
        darkThemeButton.addEventListener('click', () => {
            // Adicione a classe 'dark-theme' à tag 'body'
            document.body.classList.toggle('dark-theme');
        });
    </script>
</body>

</html>
